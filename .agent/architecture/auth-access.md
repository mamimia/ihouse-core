# Auth & Access Control

## Core Principle
No public signup.
Access is company-scoped and auditable.

---

## Entry Flows

### 1. Invite Link (Admin initiated)
1. Admin creates user draft with role.
2. System sends invite link (single use, expires 72h).
3. Employee verifies email via OTP.
4. Employee sets password.
5. Account becomes Active.

### 2. Request Access (Employee initiated)
1. Employee enters join code or scans QR.
2. Employee submits email + full name (+ phone optional).
3. System verifies email via OTP.
4. System creates AccessRequest (Pending) and notifies Admin.
5. Admin approves or rejects.
6. If approved, employee sets password via link.

---

## Company Codes
1. Static join code exists per company.
2. One time join codes can be generated by Admin (single use, expires 24h).
3. Codes are stored as hashes, never plaintext.

---

## Permissions
Operational Manager may approve access only if:
can_approve_access_requests = true

Booking override permission is explicit:
can_booking_override = true

---

## Security Rules
1. Email must be unique globally.
2. All OTP and invite tokens are time-bound.
3. All access decisions must write audit events.
4. No cross company visibility.

---

## UI Requirements
Login screen must show:
Email
Password
Sign in

Also show:
Request Access
Forgot password

No Sign up.

Request Access requires:
Company code or QR
Email
Full name
Submit